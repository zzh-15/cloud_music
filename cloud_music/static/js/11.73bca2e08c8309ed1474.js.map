{"version":3,"sources":["webpack:///src/components/NewMusic.vue","webpack:///./src/components/NewMusic.vue?b1e9","webpack:///./src/components/NewMusic.vue"],"names":["NewMusic","name","data","newMuisc","offset","loading","tips","components","SongItem","mounted","window","addEventListener","this","scrollBottom","methods","_this","screen","height","document","documentElement","scrollTop","body","clientHeight","$axios","get","then","response","concat","albums","$nextTick","catch","error","console","log","created","_this2","components_NewMusic","render","_vm","_h","$createElement","_c","_self","staticClass","on","click","$event","$router","go","attrs","aria-hidden","xlink:href","_v","_l","item","key","id","type","picUrl","people","artists","playCount","directives","rawName","value","expression","_s","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"0GAsBAA,GACAC,KAAA,WACAC,KAFA,WAGA,OACAC,SAAA,KACAC,OAAA,EACAC,SAAA,EACAC,KAAA,aAGAC,YACAC,mBAAA,GAEAC,QAbA,WAeAC,OAAAC,iBAAA,SAAAC,KAAAC,eAEAC,SACAD,aADA,WACA,IAAAE,EAAAH,KAIAF,OAAAM,OAAAC,OAAAC,SAAAC,gBAAAC,WACAF,SAAAG,KAAAC,eACAV,KAAAP,UAGAO,KAAAP,SAAA,EACAO,KAAAR,SACAQ,KAAAW,OACAC,IAAA,2BAAAZ,KAAAR,OAAA,aACAqB,KAAA,SAAAC,GACAX,EAAAZ,SAAAY,EAAAZ,SAAAwB,OAAAD,EAAAxB,KAAA0B,QAEAb,EAAAc,UAAA,WACAd,EAAAV,SAAA,MAGAyB,MAAA,SAAAC,GACAhB,EAAAT,KAAA,aAEA0B,QAAAC,IAAAF,QAKAG,QA9CA,WA8CA,IAAAC,EAAAvB,KACAA,KAAAW,OACAC,IAAA,2BAAAZ,KAAAR,OAAA,aACAqB,KAAA,SAAAC,GACAS,EAAAhC,SAAAuB,EAAAxB,KAAA0B,SAEAE,MAAA,SAAAC,GACAC,QAAAC,IAAAF,OCxEeK,GADEC,OAFjB,WAA0B,IAAAC,EAAA1B,KAAa2B,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,OAA2BE,YAAA,WAAqBF,EAAA,UAAeG,IAAIC,MAAA,SAAAC,GAAyBR,EAAAS,QAAAC,IAAA,OAAqBP,EAAA,OAAYE,YAAA,OAAAM,OAA0BC,cAAA,UAAsBT,EAAA,OAAYQ,OAAOE,aAAA,0CAAiDb,EAAAc,GAAA,KAAAX,EAAA,QAAAH,EAAAc,GAAA,YAAAd,EAAAc,GAAA,KAAAX,EAAA,OAAsEE,YAAA,SAAoBL,EAAAe,GAAAf,EAAA,kBAAAgB,GAAsC,OAAAb,EAAA,YAAsBc,IAAAD,EAAAE,GAAAb,YAAA,aAAAM,OAA4CO,GAAAF,EAAAE,GAAAC,KAAA,QAAAxD,KAAAqD,EAAArD,KAAAyD,OAAAJ,EAAAI,OAAAC,OAAAL,EAAAM,QAAA,GAAA3D,KAAA4D,UAAA,WAAoHvB,EAAAc,GAAA,KAAAX,EAAA,OAAyBqB,aAAa7D,KAAA,OAAA8D,QAAA,SAAAC,MAAA1B,EAAA,QAAA2B,WAAA,YAAsEtB,YAAA,YAAwBF,EAAA,QAAAH,EAAAc,GAAAd,EAAA4B,GAAA5B,EAAAhC,cAEnvB6D,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACEtE,EACAoC,GATF,EAVA,SAAAmC,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/11.73bca2e08c8309ed1474.js","sourcesContent":["<template>\r\n    <div>\r\n        <div class=\"header\">\r\n            <button @click=\"$router.go(-1)\">\r\n                <svg class=\"icon\" aria-hidden=\"true\">\r\n                    <use xlink:href=\"#icon-zuojiantouxiangzuoxianxing\"></use>\r\n                </svg>\r\n            </button>\r\n            <span>新碟上架</span>\r\n        </div>\r\n        <div class=\"music\">\r\n            <SongItem class=\"music-item\" v-for=\"item in newMuisc\" :id=\"item.id\" type=\"album\" :key=\"item.id\" :name=\"item.name\" :picUrl=\"item.picUrl\" :people=\"item.artists[0].name\" :playCount=\"null\" />\r\n        </div>\r\n        <div class=\"loading\" v-show=\"loading\">\r\n            <span>{{tips}}</span>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport SongItem from \"./SongItem\";\r\n\r\nexport default {\r\n  name: \"NewMusic\",\r\n  data() {\r\n    return {\r\n      newMuisc: null,\r\n      offset: 0,\r\n      loading: false,\r\n      tips: \"努力加载中...\"\r\n    };\r\n  },\r\n  components: {\r\n    SongItem\r\n  },\r\n  mounted() {\r\n    // 添加滚动事件，检测滚动到页面底部\r\n    window.addEventListener(\"scroll\", this.scrollBottom);\r\n  },\r\n  methods: {\r\n    scrollBottom() {\r\n      // 滚动到页面底部时，请求前一天的文章内容\r\n      \r\n      if (\r\n        (window.screen.height + document.documentElement.scrollTop) >=\r\n          document.body.clientHeight &&\r\n        !this.loading\r\n      ) {\r\n        // 请求的数据未加载完成时，滚动到底部不再请求前一天的数据\r\n        this.loading = true;\r\n        this.offset++;\r\n        this.$axios\r\n          .get(\"/music/top/album?offset=\" + this.offset + \"&limit=12\")\r\n          .then(response => {\r\n            this.newMuisc = this.newMuisc.concat(response.data.albums);\r\n            // 请求的数据加载完成后，再次滚动到底部时，允许请求前一天数据\r\n            this.$nextTick(() => {\r\n              this.loading = false;\r\n            });\r\n          })\r\n          .catch(error => {\r\n            this.tips = \"连接失败，请稍后重试\";\r\n            // 请求失败时，将 REQUIRE 置为 true，滚动到底部时，再次请求\r\n            console.log(error);\r\n          });\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.$axios\r\n      .get(\"/music/top/album?offset=\" + this.offset + \"&limit=12\")\r\n      .then(response => {\r\n        this.newMuisc = response.data.albums;\r\n      })\r\n      .catch(error => {\r\n        console.log(error);\r\n      });\r\n  }\r\n};\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style lang=\"scss\" scoped>\r\n.header {\r\n  position: fixed;\r\n  display: flex;\r\n  align-items: center;\r\n  top: 0;\r\n  background-color: $themeColor;\r\n  color: #fff;\r\n  font-size: 1.1rem;\r\n  z-index: 999;\r\n  width: 100%;\r\n  button {\r\n    padding: 1rem;\r\n  }\r\n}\r\n.icon {\r\n  width: 1.2rem;\r\n  height: 1.2rem;\r\n  fill: #fff;\r\n}\r\n.music {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  margin-top: 5rem;\r\n  justify-content: space-around;\r\n  .music-item {\r\n    width: 40%;\r\n  }\r\n}\r\n.loading {\r\n  height: 4rem;\r\n  text-align: center;\r\n  span {\r\n    line-height: 4rem;\r\n    color: rgb(136, 136, 136);\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/NewMusic.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"header\"},[_c('button',{on:{\"click\":function($event){_vm.$router.go(-1)}}},[_c('svg',{staticClass:\"icon\",attrs:{\"aria-hidden\":\"true\"}},[_c('use',{attrs:{\"xlink:href\":\"#icon-zuojiantouxiangzuoxianxing\"}})])]),_vm._v(\" \"),_c('span',[_vm._v(\"新碟上架\")])]),_vm._v(\" \"),_c('div',{staticClass:\"music\"},_vm._l((_vm.newMuisc),function(item){return _c('SongItem',{key:item.id,staticClass:\"music-item\",attrs:{\"id\":item.id,\"type\":\"album\",\"name\":item.name,\"picUrl\":item.picUrl,\"people\":item.artists[0].name,\"playCount\":null}})})),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"loading\"},[_c('span',[_vm._v(_vm._s(_vm.tips))])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-6fa239ee\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/components/NewMusic.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6fa239ee\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!sass-resources-loader?{\\\"resources\\\":\\\"C:\\\\\\\\work\\\\\\\\my\\\\\\\\cloud_music\\\\\\\\src\\\\\\\\assets\\\\\\\\style\\\\\\\\theme.scss\\\"}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./NewMusic.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./NewMusic.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./NewMusic.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6fa239ee\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./NewMusic.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6fa239ee\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/NewMusic.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}