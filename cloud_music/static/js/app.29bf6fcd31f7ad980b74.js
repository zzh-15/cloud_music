webpackJsonp([15],{"5cgG":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("IvJb"),i={name:"SmallAudio",data:function(){return{roatingLeft:-137,roatingRight:-134,audio:null}},methods:{playStateChange:function(){this.$store.state.playState?(this.$store.commit("playStateChange",!1),this.audio.pause()):(this.$store.commit("playStateChange",!0),this.audio.play())},open:function(){this.$store.commit("changeContentHeight",20),this.$store.commit("changeContentModal",!0)}},components:{},created:function(){var t=this;this.audio=document.querySelector("#myAudio"),setInterval(function(){if(t.$store.state.playState&&t.$store.state.currentMusic.id&&!t.$store.state.Audio&&!isNaN(t.audio.duration)){var e=t.audio.currentTime/t.audio.duration;if(e<=.5){var n=180*e*2;t.roatingRight=-135+parseInt(n),t.roatingLeft=-135}else{var a=180*(e-.5)*2;t.roatingLeft=-135+parseInt(a),t.roatingRight=45}}},1e3)}},s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"small-audio"}},[n("div",{staticClass:"song"},[n("img",{staticClass:"cover",attrs:{src:t.$store.state.currentMusic.al.picUrl,alt:""}}),t._v(" "),n("div",{staticClass:"brief"},[n("div",{staticClass:"detail"},[n("p",{staticClass:"name"},[t._v(t._s(t.$store.state.currentMusic.name))]),t._v(" "),n("p",{staticClass:"ar-name"},[t._v(t._s(t.$store.state.currentMusic.ar[0].name))])])])]),t._v(" "),n("div",{staticClass:"right"},[n("div",{staticClass:"progress",on:{click:function(e){return e.stopPropagation(),t.playStateChange(e)}}},[n("div",{staticClass:"progress-bg"}),t._v(" "),n("div",{staticClass:"progress-half"},[n("div",{staticClass:"progress-roating roating-left",style:{transform:"rotate("+t.roatingLeft+"deg)"}})]),t._v(" "),n("div",{staticClass:"progress-half"},[n("div",{staticClass:"progress-roating roating-right",style:{transform:"rotate("+t.roatingRight+"deg)"}})]),t._v(" "),t.$store.state.playState?n("svg",{staticClass:"icon-play-state",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon-weibiaoti519"}})]):n("svg",{staticClass:"icon-play-state",staticStyle:{transform:"translateX(-40%) translateY(-50%)"},attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon-bofang2"}})])]),t._v(" "),n("div",{staticClass:"icon-list",on:{click:function(e){return e.stopPropagation(),t.open(e)}}},[n("svg",{staticClass:"icon-play-list",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon-shunxubofang"}})])])])])},staticRenderFns:[]};var r={name:"CurrentList",data:function(){return{audio:null}},methods:{down:function(){this.$store.commit("changeContentHeight",0),this.$store.commit("changeContentModal",!1)},cleanAll:function(){this.down(),this.audio.pause(),this.$store.commit("currentMusicListChange",[]),this.$store.commit("currentMusicUrlChange",{})},changeMusic:function(t){var e=this;this.$axios.get("/music/song/detail?ids="+t).then(function(n){e.data=n.data,n.data.songs[0].url="http://music.163.com/song/media/outer/url?id="+t+".mp3",e.$store.commit("currentMusicUrlChange",n.data.songs[0]),e.audio.load(),e.$store.state.playState&&e.audio.play()}).catch(function(t){console.log(t)})},del:function(t){this.$store.commit("deleteCurrentMusicList",t),t==this.$store.state.currentMusic.id&&changeMusic(this.$store.state.currentMusicList[0].id)}},components:{},mounted:function(){this.audio=document.querySelector("#myAudio"),document.getElementsByClassName("content")[0].addEventListener("touchmove",function(t){t.stopPropagation()},!1)}},o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.content.modal,expression:"$store.state.content.modal"}],staticClass:"play-list",on:{click:function(e){return e.stopPropagation(),t.down(e)}}}),t._v(" "),n("div",{staticClass:"list",style:{height:t.$store.state.content.height+"rem"}},[n("div",{staticClass:"list-header"},[n("div",{staticClass:"play-model",on:{click:function(e){e.stopPropagation(),t.$store.commit("playModelChange")}}},["list_cycle"==t.$store.state.playModel?n("svg",{staticClass:"song-model",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon-liebiaoxunhuan"}})]):"list_order"==t.$store.state.playModel?n("svg",{staticClass:"song-model",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon-shunxubofang"}})]):"list_random"==t.$store.state.playModel?n("svg",{staticClass:"song-model",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon-bofangye-caozuolan-suijibofang"}})]):n("svg",{staticClass:"song-model",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon-xunhuan"}})]),t._v(" "),n("span",[t._v("("+t._s(t.$store.state.currentMusicList.length)+")")])]),t._v(" "),n("div",{staticClass:"clean",on:{click:t.cleanAll}},[n("svg",{staticClass:"song-model",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon-lajitong"}})]),t._v(" "),n("span",[t._v("清空")])])]),t._v(" "),n("div",{staticClass:"content"},t._l(t.$store.state.currentMusicList,function(e){return n("div",{key:e.id,staticClass:"item",on:{click:function(n){n.stopPropagation(),t.changeMusic(e.id)}}},[n("div",[e.id==t.$store.state.currentMusic.id?n("svg",{staticClass:"yinliang",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon-yinliang"}})]):t._e(),t._v(" "),n("p",{staticClass:"name",class:{playing:e.id==t.$store.state.currentMusic.id}},[t._v(t._s(e.name)+"\n                        "),n("span",{staticClass:"ar-name",style:{color:e.id==t.$store.state.currentMusic.id?"#c20c0c":"rgb(207, 207, 207)"}},[t._v("-"+t._s(e.ar))])])]),t._v(" "),n("svg",{staticClass:"song-model",attrs:{"aria-hidden":"true"},on:{click:function(n){n.stopPropagation(),t.del(e.id)}}},[n("use",{attrs:{"xlink:href":"#icon-cha-copy-copy"}})])])})),t._v(" "),n("div",{staticClass:"down",on:{click:t.down}},[n("p",[t._v("关闭")])])])])},staticRenderFns:[]};var c={name:"App",data:function(){return{headerTransition:""}},components:{SmallAudio:n("C7Lr")(i,s,!1,function(t){n("pe4S")},"data-v-7a460fa9",null).exports,CurrentList:n("C7Lr")(r,o,!1,function(t){n("5cgG")},"data-v-34106c49",null).exports},methods:{play:function(){this.$router.push({path:"/audio",query:{id:this.$store.state.currentMusic.id}})}},watch:{$route:function(t,e){t.meta.index>e.meta.index?this.headerTransition="slide-left":this.headerTransition="slide-right"}}},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{modal:t.$store.state.content.modal},attrs:{id:"app"}},[n("transition",{attrs:{name:t.headerTransition}},[n("router-view")],1),t._v(" "),n("audio",{attrs:{id:"myAudio"}},[n("source",{attrs:{src:t.$store.state.currentMusic.url,type:"audio/mpeg"}})]),t._v(" "),!t.$store.state.Audio&&t.$store.state.currentMusic.id?n("SmallAudio",{nativeOn:{click:function(e){return t.play(e)}}}):t._e(),t._v(" "),n("CurrentList")],1)},staticRenderFns:[]};var u=n("C7Lr")(c,l,!1,function(t){n("NMjB")},null,null).exports,d=n("zO6J");a.a.use(d.a);var h=new d.a({linkActiveClass:"router-link-active",routes:[{path:"/",redirect:"main"},{path:"/newMusic",name:"NewMusic",meta:{index:5},component:function(){return Promise.all([n.e(0),n.e(11)]).then(n.bind(null,"KCMz"))}},{path:"/listDetail",name:"SongListDetail",meta:{index:6},component:function(){return Promise.all([n.e(0),n.e(10)]).then(n.bind(null,"1i1K"))}},{path:"/search",name:"SearchPage",meta:{index:4},component:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"/kg+"))}},{path:"/searchResult",name:"SearchResult",meta:{index:5},component:function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,"+GJB"))}},{path:"/music",name:"MusicPage",meta:{index:-1},component:function(){return Promise.all([n.e(0),n.e(8)]).then(n.bind(null,"Y8d1"))}},{path:"/audio",name:"Audio",meta:{index:7},component:function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,"PkCn"))}},{path:"/singerList",name:"SingerSongList",meta:{index:6},component:function(){return Promise.all([n.e(0),n.e(9)]).then(n.bind(null,"OBai"))}},{path:"/main",name:"Home",component:function(){return n.e(5).then(n.bind(null,"lO7g"))},children:[{path:"",redirect:"home"},{path:"home",name:"HomePage",meta:{index:2},component:function(){return n.e(7).then(n.bind(null,"wrM5"))},children:[{path:"",redirect:"recommend"},{path:"recommend",component:function(){return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,"dGqQ"))},meta:{index:0}},{path:"playlist",component:function(){return Promise.all([n.e(0),n.e(13)]).then(n.bind(null,"In7A"))},meta:{index:1}},{path:"rank",component:function(){return n.e(12).then(n.bind(null,"SEDu"))},meta:{index:3}}]},{path:"singer",name:"SingerPage",meta:{index:3},component:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"no0Q"))}}]}]}),m=n("aozt"),p=n.n(m),g=n("9rMa");a.a.use(g.a);var f=new g.a.Store({state:{currentPage:"home",currentMusic:{},currentMusicList:[],playState:!1,playModel:"list_cycle",Audio:!1,content:{height:0,modal:!1}},mutations:{currentPageChange:function(t,e){t.currentPage=e},currentMusicUrlChange:function(t,e){t.currentMusic=e},currentMusicListChange:function(t,e){t.currentMusicList=e},addCurrentMusicList:function(t,e){t.currentMusicList.push(e)},deleteCurrentMusicList:function(t,e){t.currentMusicList=t.currentMusicList.filter(function(t){return t.id!=e})},playStateChange:function(t,e){t.playState=e},playModelChange:function(t){"list_cycle"==t.playModel?t.playModel="list_order":"list_order"==t.playModel?t.playModel="list_random":"list_random"==t.playModel?t.playModel="list_one":t.playModel="list_cycle"},changeAudio:function(t,e){t.Audio=e},changeContentHeight:function(t,e){t.content.height=e},changeContentModal:function(t,e){t.content.modal=e}}}),v=n("zdS3"),C=n.n(v);a.a.use(g.a),a.a.use(h),a.a.use(C.a,{loading:"./static/img/timg.jpg"}),a.a.config.productionTip=!1,a.a.prototype.$axios=p.a,a.a.prototype.$Storage=localStorage,new a.a({el:"#app",router:h,store:f,components:{App:u},template:"<App/>"})},NMjB:function(t,e){},pe4S:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.29bf6fcd31f7ad980b74.js.map