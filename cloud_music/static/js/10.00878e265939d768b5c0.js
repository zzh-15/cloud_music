webpackJsonp([10],{"1i1K":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("3cXf"),n=e.n(i),s=e("SHgw"),r=e("GR7l"),l={name:"SongListDetail",data:function(){return{BgColor:"#fff",coverImgUrl:"",playCount:"",name:"",avatarUrl:"",nickname:"",length:"",tracks:null,time:""}},components:{SongCover:s.a,PlayListItem:r.a},methods:{play:function(t){var a=[];this.tracks.map(function(t){a.push({id:t.id,name:t.name,ar:t.ar[0].name,al:t.al.name})}),this.$Storage.setItem("playingList",n()(a)),this.$store.commit("currentMusicListChange",a),this.$router.push({path:"/audio",query:{id:t}})},rgb:function(){var t=this;setTimeout(function(){var a=document.createElement("canvas"),e=a.getContext("2d"),i=new Image;i.crossOrigin="anonymous",i.src=t.coverImgUrl,i.onload=function(){a.width=i.width,a.height=i.height,e.drawImage(i,0,0);var n=void 0,s=void 0,r=void 0;n=s=r=0;for(var l=parseInt(i.width/10),o=parseInt(i.height/10),c=0;c<10;c++)for(var u=0;u<10;u++){var d=e.getImageData(c*l,u*o,l,o).data;n+=d[0],s+=d[1],r+=d[2]}t.BgColor="rgb("+(parseInt(n/100)-60)+","+(parseInt(s/100)-60)+","+(parseInt(r/100)-60)+")"}},0)},Count:function(t){t.playCount/=1e4,t.playCount=t.playCount.toFixed(1)+"万"}},created:function(){var t=this;"playlist"==this.$route.query.type?this.$axios.get("/music/playlist/detail?id="+this.$route.query.id).then(function(a){t.Count(a.data.playlist),t.coverImgUrl=a.data.playlist.coverImgUrl,t.playCount=a.data.playlist.playCount,t.name=a.data.playlist.name,t.avatarUrl=a.data.playlist.creator.avatarUrl,t.nickname=a.data.playlist.creator.nickname,t.tracks=a.data.playlist.tracks,t.length=t.tracks.length,t.rgb()}).catch(function(t){console.log(t)}):"album"==this.$route.query.type&&this.$axios.get("/music/album?id="+this.$route.query.id).then(function(a){t.coverImgUrl=a.data.album.picUrl,t.name=a.data.album.name,t.nickname=a.data.album.artist.name,t.tracks=a.data.songs,t.length=t.tracks.length;var e=new Date(a.data.album.publishTime);t.time=e.getFullYear()+"."+e.getMonth()+"."+e.getDate(),t.rgb()}).catch(function(t){console.log(t)})}},o={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"main"},[e("div",{staticClass:"header",style:{backgroundColor:t.BgColor}}),t._v(" "),e("div",{staticClass:"list-header"},[e("button",{on:{click:function(a){t.$router.go(-1)}}},[e("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-zuojiantouxiangzuoxianxing"}})])]),t._v(" "),"playlist"==t.$route.query.type?e("span",[t._v("歌单")]):"album"==t.$route.query.type?e("span",[t._v("专辑")]):t._e()]),t._v(" "),e("div",{staticClass:"list-brief"},[e("div",{staticClass:"bg",style:{background:"url("+t.coverImgUrl+") no-repeat left top",backgroundSize:"cover"}}),t._v(" "),e("div",{staticClass:"content"},[e("SongCover",{staticClass:"cover",attrs:{picUrl:t.coverImgUrl,playCount:t.playCount}}),t._v(" "),e("div",{staticClass:"list-name"},[e("p",[t._v(t._s(t.name))]),t._v(" "),"playlist"==t.$route.query.type?e("div",{staticClass:"description"},[t.avatarUrl?e("img",{staticClass:"avatar-url",attrs:{src:t.avatarUrl,alt:""}}):t._e(),t._v(t._s(t.nickname))]):"album"==t.$route.query.type?e("div",{staticClass:"description"},[e("p",[t._v("歌手: "+t._s(t.nickname))]),t._v(" "),e("p",{staticStyle:{"margin-top":"1rem"}},[t._v("发行时间: "+t._s(t.time))])]):t._e()])],1)]),t._v(" "),e("div",[e("div",{staticClass:"play-all",on:{click:function(a){t.play(t.tracks[0].id)}}},[e("div",{staticClass:"item-size"},[e("svg",{staticClass:"icon play-icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-bofang"}})])]),t._v(" "),e("p",{staticClass:"item-name"},[t._v("播放全部\n        "),e("span",{staticClass:"size"},[t._v("(共"+t._s(t.length)+"首)")])])]),t._v(" "),e("div",t._l(t.tracks,function(a,i){return e("PlayListItem",{key:a.id,attrs:{id:a.id,index:i+1,name:a.name,author:a.ar[0].name,album:a.al.name,type:t.$route.query.type},nativeOn:{click:function(e){t.play(a.id)}}})}))])])},staticRenderFns:[]};var c=e("C7Lr")(l,o,!1,function(t){e("r+Zz")},"data-v-70e55dd2",null);a.default=c.exports},"r+Zz":function(t,a){}});
//# sourceMappingURL=10.00878e265939d768b5c0.js.map